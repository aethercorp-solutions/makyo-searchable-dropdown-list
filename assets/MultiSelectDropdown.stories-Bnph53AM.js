import{j as r}from"./jsx-runtime-BjG_zV1W.js";import{r as l}from"./iframe-4e1neK_a.js";import{P as J}from"./index-Cy_lTq1e.js";import"./preload-helper-BWQe-k23.js";const v=({options:f=[],multiple:w=!0,outlined:j=!1,optionLabel:n="",filtering:x=!0,usePortal:S=!1,placeholder:T="Select..."})=>{const[L,m]=l.useState(!1),[b,K]=l.useState(""),[d,c]=l.useState([]),[g,y]=l.useState(null),i=l.useRef(null),h=l.useRef(null),N=()=>{m(e=>{const t=!e;if(t&&i.current){const o=i.current.getBoundingClientRect();y({top:o.bottom+window.scrollY,left:o.left+window.scrollX,width:o.width})}else y(null);return t})},a=e=>typeof e=="string"?e:e&&typeof e=="object"?n&&e[n]!==void 0&&e[n]!==null?e[n]:e.name||e.label||JSON.stringify(e):"",D=e=>{w?d.includes(e)?c(t=>t.filter(o=>o!==e)):c(t=>[...t,e]):d.includes(e)?c([]):(c([e]),m(!1))},B=e=>{c(t=>t.filter(o=>o!==e))},F=e=>a(e).toLowerCase().includes(b.toLowerCase()),C=e=>{h.current&&!h.current.contains(e.target)&&i.current&&!i.current.contains(e.target)&&m(!1)};l.useEffect(()=>(document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)),[]);const W=(e,t)=>{if(!t)return e;const o=new RegExp(`(${t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")})`,"gi");return e.split(o).map((s,E)=>o.test(s)?r.jsx("mark",{style:{backgroundColor:"#95dfdd",color:"#333",borderRadius:2},children:s},E):r.jsx("span",{children:s},E))},k=x?f.filter(F):f,z=(e,t)=>typeof e=="string"?e:e&&e.id!==void 0?e.id:e&&e.name?e.name:`option-${t}`,$=()=>r.jsxs("div",{className:"dropdown-body",style:S&&g?{position:"absolute",top:`${g.top}px`,left:`${g.left}px`,width:`${g.width}px`,zIndex:9999}:{},ref:h,role:"listbox","aria-multiselectable":w,tabIndex:-1,children:[x&&r.jsxs("div",{className:"search-container",children:[r.jsx("span",{className:"search-icon","aria-hidden":"true",children:"🔍"}),r.jsx("input",{type:"text","aria-label":"Search options",value:b,onChange:e=>K(e.target.value),className:"search-input",autoFocus:!0,placeholder:"Search..."})]}),k.length===0?r.jsx("div",{className:"no-options","aria-live":"polite",children:"No options found"}):k.map((e,t)=>{const o=a(e),O=d.includes(e);return r.jsx("div",{className:`option-item ${O?"selected":""}`,onClick:()=>D(e),role:"option","aria-selected":O,tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),D(e))},children:W(o,x?b:"")},z(e,t))})]});return r.jsxs("div",{className:`multi-select-dropdown-wrapper ${j?"outlined":""}`,children:[n&&r.jsx("label",{className:"dropdown-label",htmlFor:"multi-select-dropdown-header",children:n}),r.jsxs("div",{className:`multi-select-dropdown ${j?"outlined":""}`,ref:h,children:[r.jsxs("div",{id:"multi-select-dropdown-header",className:"dropdown-header",onClick:N,ref:i,role:"combobox","aria-expanded":L,"aria-haspopup":"listbox",tabIndex:0,onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),N()),e.key==="Escape"&&m(!1)},children:[d.length===0?r.jsx("span",{className:"placeholder-text",style:{color:"#aaa"},children:T}):d.map(e=>r.jsxs("span",{className:"selected-tag",title:a(e),children:[a(e),w&&r.jsx("button",{"aria-label":`Remove ${a(e)}`,onClick:t=>{t.stopPropagation(),B(e)},children:"×"})]},a(e))),r.jsx("span",{className:"dropdown-arrow","aria-hidden":"true",children:L?"▲":"▼"})]}),L&&(S?J.createPortal($(),document.body):$())]})]})};v.__docgenInfo={description:"",methods:[],displayName:"MultiSelectDropdown",props:{options:{defaultValue:{value:"[]",computed:!1},required:!1},multiple:{defaultValue:{value:"true",computed:!1},required:!1},outlined:{defaultValue:{value:"false",computed:!1},required:!1},optionLabel:{defaultValue:{value:"''",computed:!1},required:!1},filtering:{defaultValue:{value:"true",computed:!1},required:!1},usePortal:{defaultValue:{value:"false",computed:!1},required:!1},placeholder:{defaultValue:{value:"'Select...'",computed:!1},required:!1}}};const H={title:"Components/MultiSelectDropdown",component:v,argTypes:{multiple:{control:"boolean"},outlined:{control:"boolean"},filtering:{control:"boolean"},usePortal:{control:"boolean"},placeholder:{control:"text"},optionLabel:{control:"text"}}},_=f=>r.jsx(v,{...f}),u=_.bind({});u.args={options:["Option 1","Option with icon","Long Long Option 3","Long Long Long Option 4","Long Long Long Long Option 5","Long Long Long Long Long Option 6"],multiple:!0,outlined:!1,filtering:!0,usePortal:!1,placeholder:"Select options..."};const p=_.bind({});p.args={options:[{id:1,name:"Option 1"},{id:2,name:"Option with icon"},{id:3,name:"Long Long Option 3"},{id:3,name:"Long Long Long Option 4"},{id:3,name:"Long Long Long Long Option 5"},{id:3,name:"Long Long Long Long Long Option 6"}],multiple:!0,outlined:!0,filtering:!0,optionLabel:"Label",placeholder:"Select..."};var R,M,V;u.parameters={...u.parameters,docs:{...(R=u.parameters)==null?void 0:R.docs,source:{originalSource:"args => <MultiSelectDropdown {...args} />",...(V=(M=u.parameters)==null?void 0:M.docs)==null?void 0:V.source}}};var q,I,P;p.parameters={...p.parameters,docs:{...(q=p.parameters)==null?void 0:q.docs,source:{originalSource:"args => <MultiSelectDropdown {...args} />",...(P=(I=p.parameters)==null?void 0:I.docs)==null?void 0:P.source}}};const Q=["Default","WithObjects"];export{u as Default,p as WithObjects,Q as __namedExportsOrder,H as default};
